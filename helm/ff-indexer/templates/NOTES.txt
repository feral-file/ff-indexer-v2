Thank you for installing {{ .Chart.Name }}.

Your release is named {{ .Release.Name }}.

To learn more about the release, try:

  $ helm status {{ .Release.Name }} -n {{ .Release.Namespace }}
  $ helm get all {{ .Release.Name }} -n {{ .Release.Namespace }}

{{- if .Values.api.enabled }}

API Service:
{{- if .Values.api.ingress.enabled }}
  The API is accessible via Ingress at:
  {{- range .Values.api.ingress.hosts }}
  http{{ if $.Values.api.ingress.tls }}s{{ end }}://{{ .host }}
  {{- end }}
{{- else }}
  Get the API URL by running:

  {{- if contains "NodePort" .Values.api.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "ff-indexer.fullname" . }}-api)
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo "API URL: http://$NODE_IP:$NODE_PORT"
  {{- else if contains "LoadBalancer" .Values.api.service.type }}
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "ff-indexer.fullname" . }}-api -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  echo "API URL: http://$SERVICE_IP:{{ .Values.api.service.port }}"
  {{- else if contains "ClusterIP" .Values.api.service.type }}
  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "ff-indexer.fullname" . }}-api {{ .Values.api.service.port }}:{{ .Values.api.service.port }}
  echo "API URL: http://127.0.0.1:{{ .Values.api.service.port }}"
  {{- end }}
{{- end }}
{{- end }}

External Services:
  - Temporal Server: {{ .Values.externalTemporal.hostPort }}
  - NATS JetStream: {{ .Values.externalNats.url }}

Components deployed:
{{- if .Values.postgresql.enabled }}
  - PostgreSQL (Application Database)
{{- end }}
{{- if .Values.api.enabled }}
  - API Server
{{- end }}
{{- if .Values.ethereumEventEmitter.enabled }}
  - Ethereum Event Emitter
{{- end }}
{{- if .Values.tezosEventEmitter.enabled }}
  - Tezos Event Emitter
{{- end }}
{{- if .Values.eventBridge.enabled }}
  - Event Bridge
{{- end }}
{{- if .Values.workerCore.enabled }}
  - Worker Core ({{ .Values.workerCore.replicaCount }} replica{{ if gt .Values.workerCore.replicaCount 1.0 }}s{{ end }})
{{- end }}
{{- if .Values.workerMedia.enabled }}
  - Worker Media ({{ .Values.workerMedia.replicaCount }} replica{{ if gt .Values.workerMedia.replicaCount 1.0 }}s{{ end }})
{{- end }}

IMPORTANT: Before using the indexer, ensure you have:
  1. External Temporal server is running and accessible at: {{ .Values.externalTemporal.hostPort }}
  2. External NATS JetStream is running and accessible at: {{ .Values.externalNats.url }}
  3. Set the Ethereum RPC URL in values.yaml (config.ethereum.rpcUrl)
  4. Configured authentication keys if needed (config.auth)
  5. Updated registry files (blacklist.json, publisher.json) if needed

Monitor the deployment status:
  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

View logs for a specific component:
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/component=api --tail=100 -f

For more information, visit: https://github.com/feral-file/ff-indexer-v2

